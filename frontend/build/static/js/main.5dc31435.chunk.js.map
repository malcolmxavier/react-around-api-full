{"version":3,"sources":["images/logo.svg","components/Register.js","components/Login.js","components/PopupWithForm.js","components/InfoTooltip.js","components/ProtectedRoute.js","components/Header.js","contexts/CurrentUserContext.js","components/Main.js","components/Card.js","components/Footer.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddCardPopup.js","components/PopupWithImage.js","auth.js","utils/API.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Register","props","React","useState","email","setEmail","password","setPassword","handleSubmit","e","preventDefault","handleSignup","className","onSubmit","type","placeholder","required","onChange","target","value","minlength","aria-label","onClick","to","Login","handleLogin","PopupWithForm","isOpen","name","action","onClose","title","children","button","InfoTooltip","ProtectedRoute","Component","component","isLoggedIn","Header","src","logo","alt","link","linkText","CurrentUserContext","createContext","Main","currentUser","useContext","Provider","avatar","onEditAvatar","onEditProfile","about","onAddCard","Card","isOwn","card","owner","_id","isLiked","likes","some","i","key","id","style","backgroundImage","image","onCard","onDeleteCard","onCardLike","likesCount","Footer","EditAvatarPopup","setAvatar","avatarRef","useRef","closeAllPopups","onUpdateAvatar","ref","current","EditProfilePopup","setName","description","setDescription","useEffect","onUpdateUser","minLength","maxLength","AddCardPopup","newCardName","setNewCardName","newCardLink","setNewCardLink","onAddCardSubmit","PopupWithImage","BASE_URL","api","baseURL","headers","this","_baseURL","_headers","fetch","then","res","ok","json","Promise","reject","status","statusText","method","body","JSON","stringify","catch","err","console","log","authorization","App","setIsLoggedIn","setIsInfoTooltipPopupOpen","setUserData","setCurrentUser","cards","setCards","isEditAvatarPopupOpen","setIsAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddCardPopupOpen","setIsAddCardPopupOpen","isDeleteCardPopupOpen","setIsDeleteCardPopupOpen","isImagePopupOpen","setIsImagePopupOpen","setImage","imageCaption","setImageCaption","history","useHistory","handleCardLike","removeCardLike","newCard","newCards","map","c","addCardLike","handleCardClick","caption","handleDeleteCardClick","token","jwt","localStorage","getItem","data","userData","username","push","getCardList","getUserInfo","path","response","auth","statusCode","Error","user","setItem","exact","removeItem","length","setUserAvatar","setUserInfo","addCard","removeCard","filter","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.5dc31435.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.8f7611ae.svg\";","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register(props) {\n    const [email, setEmail] = React.useState('');\n    const [password, setPassword] = React.useState('');\n\n    function handleEmailChange(e) {\n        setEmail(e.target.value)\n    }\n    \n    function handlePasswordChange(e) {\n        setPassword(e.target.value)\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.handleSignup(email, password);\n    }\n\n    return (\n        <main className='content'>\n            <h2 className='form__name'>Sign up</h2>\n            <form className='form' onSubmit={handleSubmit}>\n                <input className='form__input' type='email' placeholder='Email' required onChange={handleEmailChange} />\n                <span className='form__error'></span>\n                <input className='form__input' type='text' placeholder='Password' required minlength='8' onChange={handlePasswordChange} />\n                <span className='form__error'></span>\n                <button className='form__button' type='submit' aria-label='Sign Up' onClick={handleSubmit}>Sign up</button>\n            </form>\n            <Link to='/signin' className='form__link'>Already a member? Log in here!</Link>\n        </main>\n    );\n}\n\nexport default Register;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Login(props) {\n    const [email, setEmail] = React.useState('');\n    const [password, setPassword] = React.useState('');\n\n    function handleEmailChange(e) {\n        setEmail(e.target.value)\n    }\n    \n    function handlePasswordChange(e) {\n        setPassword(e.target.value)\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.handleLogin(email, password);\n    }\n\n    return (\n        <main className='content'>\n            <h2 className='form__name'>Log in</h2>\n            <form className='form' onSubmit={handleSubmit}>\n                <input className='form__input' type='email' placeholder='Email' required onChange={handleEmailChange} />\n                <span className='form__error'></span>\n                <input className='form__input' type='text' placeholder='Password' required onChange={handlePasswordChange} />\n                <span className='form__error'></span>\n                <button className='form__button' type='submit' aria-label='Log In' onClick={handleSubmit}>Log in</button>\n            </form>\n            <Link to='/signup' className='form__link'>Not a member yet? Sign up here!</Link>\n        </main>\n    );\n}\n\nexport default Login;\n","import React from 'react';\n\nfunction PopupWithForm(props) {\n    return (\n        <div>\n            <section className={props.isOpen ? `popup popup_type_${props.name} popup_opened` : `popup popup_type_${props.name}`}>\n            <div className='popup__container popup__container_type_form'>\n              <button className='close-button' aria-label={`Close ${props.action} Popup`} onClick={props.onClose}></button>\n              <h2 className='popup__title'>{props.title}</h2>\n              <form className={`popup__form popup__form_type_${props.name}`} onSubmit={props.onSubmit}>\n                {props.children}\n                <button className={`popup__button ${props.button}-button`} type='submit' aria-label={`${props.action}`} onClick={props.onClose}></button>\n              </form>\n            </div>\n          </section>\n        </div>\n    );\n}\n\nexport default PopupWithForm;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction InfoTooltip(props) {\n\n    return(\n        <PopupWithForm name='login' action={`Login ${props.valid ? 'Success' : 'Failure'}`} onClose={props.closeAllPopups} isOpen={props.isOpen}>\n          <img className='popup__icon' src={props.valid ? '../images/success-icon.png' : '../images/failure-icon.png'} alt={props.valid ? 'Black check in a black circle' : 'Red X in a red circle'} />\n          <p className='popup__text'>{props.valid ? 'Success! You have now been registered' : 'Oops, something went wrong! Please try again.'}</p>\n        </PopupWithForm>\n    );\n}\n\nexport default InfoTooltip;","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\n\nfunction ProtectedRoute({component: Component, ...props}) {\n    return (\n        <Route>\n            {() => props.isLoggedIn ? <Component {...props} /> : <Redirect to='/signin' />}\n        </Route>\n    )\n}\n\nexport default ProtectedRoute;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport logo from '../images/logo.svg';\n\nfunction Header(props) {\n  return (\n    <div className=\"Header\">\n        <header className='header'>\n          <img src={logo} alt='Around The U.S. text logo' className='logo' />\n          <Link to={props.link} className='header__link' onClick={props.onClick}>{props.linkText}</Link>\n        </header>\n    </div>\n    );\n}\n\nexport default Header;","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <main className='content'>\n        <section className='profile'>\n          <div className='profile__avatar'>\n            <img src={currentUser.avatar} alt='Profile avatar' className='avatar avatar_profile'/>\n            <div className='avatar__edit-overlay'>\n              <button className='edit-button edit-button_avatar' aria-label=\"Edit Avatar\" onClick={props.onEditAvatar}></button>\n            </div>\n          </div>\n          <div className='profile__info'>\n            <h1 className='profile__name'>{currentUser.name}</h1>\n            <button className='edit-button edit-button_profile' aria-label='Edit Profile' onClick={props.onEditProfile}></button>\n            <p className='profile__occupation'>{currentUser.about}</p>\n          </div>\n          <button className='add-button' aria-label='Add Card' onClick={props.onAddCard}></button>\n        </section>\n\n        <section className='photo-grid'>\n          <ul className='photo-grid__list'>\n            {props.children}\n          </ul>\n        </section>\n      </main>\n    </CurrentUserContext.Provider>\n    );\n}\n\nexport default Main;","import React from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nfunction Card(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n    const isOwn = props.card.owner._id === currentUser._id;\n    const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n\n    function handleCardClick() {\n        props.onCard(props.image, props.title);\n    }\n\n    function handleLikeClick() {\n        props.onCardLike(props.card);\n    }\n\n    return(\n        <li className='photo-grid__item' key={props.id}>\n            <div className='photo-grid__image' style={{backgroundImage:`url(${props.image})`}} onClick={handleCardClick}></div>\n            <button className={isOwn ? 'trash-button' : 'trash-button_hidden'} aria-label='Delete Card' onClick={props.onDeleteCard}></button>\n            <div className='photo-grid__description'>\n                <h3 className='photo-grid__label'>{props.title}</h3>\n                <div className='photo-grid__likes'>\n                    <button className={isLiked ? 'like-button like-button_clicked' : 'like-button'} aria-label='Like Card' onClick={handleLikeClick}></button>\n                    <p className='photo-grid__likes-count'>{props.likesCount}</p>\n                </div>\n            </div>\n        </li>\n    );\n}\n\nexport default Card;","import React from 'react';\n\nfunction Footer() {\n  return (\n    <div className='Footer'>\n        <footer className='footer'>\n          <p>&copy; 2020 Around The U.S.</p>\n        </footer>\n    </div>\n    );\n}\n\nexport default Footer;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nfunction EditAvatarPopup(props) {\n    const currentUser = React.useContext(CurrentUserContext)\n    const [avatar, setAvatar] = React.useState(currentUser.avatar)\n    const avatarRef = React.useRef(avatar)\n\n    function handleAvatarChange(e) {\n        setAvatar(avatarRef.current.value)\n    }\n\n    function handleSubmit(e){\n        e.preventDefault()\n        props.onUpdateAvatar(avatar)\n    }\n\n    return (\n        <PopupWithForm name='edit-avatar' action='Edit Avatar' title='Change profile picture' button='save' onClose={props.closeAllPopups} isOpen={props.isOpen} onSubmit={handleSubmit}>\n          <input name='avatar' id='avatar-url' className='popup__input popup__input_type_url' type='url' placeholder='Image URL' required ref={avatarRef} onChange={handleAvatarChange} />\n          <span id='avatar-url-error' className='popup__error'></span>\n        </PopupWithForm>\n    )\n}\n\nexport default EditAvatarPopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nfunction EditProfilePopup(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n    const [name, setName] = React.useState(currentUser.name);\n    const [description, setDescription] = React.useState(currentUser.about);\n\n    React.useEffect(() => {\n        setName(currentUser.name)\n        setDescription(currentUser.about)\n      }, [currentUser])\n\n      function handleNameChange(e) {\n        setName(e.target.value)\n      }\n    \n      function handleDescriptionChange(e) {\n        setDescription(e.target.value)\n      }\n\n      function handleSubmit(e) {\n        e.preventDefault();\n      \n        props.onUpdateUser({\n          name,\n          about: description,\n        });\n      }\n\n      return (\n        <PopupWithForm name='edit-profile' action='Edit Profile' title='Edit profile' button='save' onClose={props.onClose} isOpen={props.isOpen} onSubmit={handleSubmit}>\n          <input name='userName' id='profile-name' className='popup__input popup__input_type_name' type='text' placeholder='Name' required minLength='2' maxLength='40' onChange={handleNameChange} />\n          <span id='profile-name-error' className='popup__error'></span>\n          <input name='userOccupation' id='profile-occupation' className='popup__input popup__input_type_occupation' type='text' placeholder='About Me' required minLength='2' maxLength='200' onChange={handleDescriptionChange} />\n          <span id='profile-occupation-error' className='popup__error'></span>\n        </PopupWithForm>\n      )\n}\n\nexport default EditProfilePopup;\n\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction AddCardPopup(props) {;\n    const [newCardName, setNewCardName] = React.useState({})\n    const [newCardLink, setNewCardLink] = React.useState({});\n\n    function handleNewCardNameChange(e) {\n        setNewCardName(e.target.value);\n    }\n\n    function handleNewCardLinkChange(e) {\n        setNewCardLink(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        props.onAddCardSubmit({\n        name: newCardName,\n        link: newCardLink\n        })\n    }\n\n    return(\n        <PopupWithForm name='add-card' action='Add Card' title='New Place' button='create' onClose={props.onClose} isOpen={props.isOpen} onSubmit={handleSubmit}>\n          <input name='name' id='card-label' className='popup__input popup__input_type_label' type='text' placeholder='Label' required minLength=\"1\" maxLength=\"30\" onChange={handleNewCardNameChange} />\n          <span id='card-label-error' className='popup__error'></span>\n          <input name='link' id='card-url' className='popup__input popup__input_type_url' type='url' placeholder='Image URL' required onChange={handleNewCardLinkChange} />\n          <span id='card-url-error' className='popup__error'></span>\n        </PopupWithForm>\n    )\n}\n\nexport default AddCardPopup;","import React from 'react';\n\nfunction PopupWithImage(props) {\n    return (\n        <div>\n            <section className={props.isOpen ? 'popup popup_type_image popup_opened' : 'popup popup_type_image'}>\n                <div className='popup__container popup__container_type_image'>\n                <figure className='figure'>\n                    <button className='close-button' aria-label='Close Image Popup' onClick={props.onClose}></button>\n                    <img className='popup__image' alt={props.title} src={props.image}/>\n                    <figcaption className='popup__caption'>{props.title}</figcaption>\n                </figure>\n                </div>\n            </section>\n        </div>\n    );\n}\n\nexport default PopupWithImage;","export const BASE_URL = 'https://register.nomoreparties.co';\n\nexport const register = (email, password) => {\n    return fetch(`${BASE_URL}/auth/local/register`, {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({email, password})\n    })\n    .then((response) => {\n        return response.json();\n    })\n    .then((res) => {\n        return res;\n    })\n    .catch((err) => console.log(err));\n};\n\nexport const authorize = (email, password) => {\n    return fetch(`${BASE_URL}/auth/local`, {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({email, password})\n    })\n    .then((response => response.json()))\n    .then((data) => {\n        if (data.user) {\n            localStorage.setItem('jwt', data.jwt);\n            return data;\n        } else {\n            return;\n        }\n    })\n    .catch(err => console.log(err))\n};\n\nexport const getContent = (token) => {\n    return fetch(`${BASE_URL}/users/me`, {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n        },\n    })\n    .then(res => res.json())\n    .then(data => data)\n}","class API {\n    constructor({baseURL, headers}) {\n      this._baseURL = baseURL;\n      this._headers = headers;\n    }\n  \n    getUserInfo() {\n      return fetch(this._baseURL + '/users/me', {\n        headers: this._headers\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    };\n  \n    setUserInfo(name, about) {\n      return fetch(this._baseURL + '/users/me', {\n        headers: this._headers,\n        method: \"PATCH\",\n        body: JSON.stringify({\n          name,\n          about\n        })\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n      .catch(err => console.log(err))\n    };\n  \n    setUserAvatar(avatar) {\n      return fetch(this._baseURL + '/users/me/avatar', {\n        headers: this._headers,\n        method: \"PATCH\",\n        body: JSON.stringify({\n          avatar\n        })\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n      .catch(err => console.log(err))\n    };\n  \n    getCardList() {\n      return fetch(this._baseURL + '/cards', {\n        headers: this._headers\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    };\n  \n    addCard({name, link}) {\n      return fetch(this._baseURL + '/cards', {\n        headers: this._headers,\n        method: \"POST\",\n        body: JSON.stringify({\n          name: name,\n          link: link\n        })\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n      .catch(err => console.log(err))\n    };\n  \n    removeCard(_id) {\n      return fetch(this._baseURL + '/cards/' + _id, {\n        headers: this._headers,\n        method: \"DELETE\"\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n      .catch(err => console.log(err))\n    };\n  \n    addCardLike(_id) {\n      return fetch(this._baseURL + '/cards/likes/' + _id, {\n        headers: this._headers,\n        method: \"PUT\",\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n      .catch(err => console.log(err))\n    };\n  \n    removeCardLike(_id) {\n      return fetch(this._baseURL + '/cards/likes/' + _id, {\n        headers: this._headers,\n        method: \"DELETE\",\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n      .catch(err => console.log(err))\n    };\n  }\n\n  const api = new API({\n    baseURL: \"https://register.nomoreparties.co\",\n    headers: {\n      authorization: \"bfb84dd3-54e8-4642-a5bf-7fe819e5fd4b\",\n      \"Content-Type\": \"application/json\"\n    }\n  });\n  \n  export {api};","import React from 'react';\nimport { BrowserRouter, Route, Switch, useHistory } from 'react-router-dom';\nimport Register from './Register.js';\nimport Login from './Login.js';\nimport InfoToolTip from './InfoTooltip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Card from './Card.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport AddCardPopup from './AddCardPopup.js';\nimport PopupWithImage from './PopupWithImage.js';\nimport * as auth from '../auth.js';\nimport {api} from '../utils/API.js';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\nimport '../index.css';\n\nfunction App() {\n  const [isLoggedIn, setIsLoggedIn] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\n  const [userData, setUserData] = React.useState(false);\n  const [currentUser, setCurrentUser] = React.useState({avatar: '', name: '', about: ''});\n  const [cards, setCards] = React.useState([]);\n  const [isEditAvatarPopupOpen, setIsAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddCardPopupOpen, setIsAddCardPopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setIsDeleteCardPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [image, setImage] = React.useState(\"\");\n  const [imageCaption, setImageCaption] = React.useState(\"\");\n  const history = useHistory();\n\n  function handleSignup(email, password) {\n    auth.register(email, password)\n    .then((res) => {\n        if (!res || res.statusCode === 400) {\n          setIsInfoTooltipPopupOpen(true);\n          throw new Error('Something is not right.');\n        }\n\n        return res;\n    })\n    .then(() => {\n      setIsInfoTooltipPopupOpen(true);\n      history.push('/signin');\n    })\n    .catch(err => console.log(err));\n}\n\n  function handleLogin(email, password) {\n    if (!email || !password) {\n      return;\n    }\n    \n    auth.authorize(email, password)\n    .then((data) => {\n      if (!data) {\n          throw new Error('Something is not right.');\n      }\n    })\n    .then(() => history.push('/'))\n    .catch(err => console.log(err));\n  }\n\n  React.useEffect(() => {\n    let jwt = localStorage.getItem('jwt');\n\n    if (jwt) {\n      auth.getContent(jwt)\n      .then((res) => {\n        let userData = {username: res.username, email: res.email}\n\n        setIsLoggedIn(true);\n        setUserData(userData);\n        history.push('/');\n      })\n    }\n  }, [history, isLoggedIn])\n\n  function handleSignOut() {\n    localStorage.removeItem('jwt');\n    setIsLoggedIn(false);\n    history.push('/signin')\n  }\n  \n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    if (isLiked) {\n      api.removeCardLike(card._id)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch(err => console.log(err));\n    } else {\n      api.addCardLike(card._id)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch(err => console.log(err));\n    }\n  }\n\n  function handleCardDelete(card){\n    api.removeCard(card._id)\n    .then((res) => {\n      const newCards = cards.filter((c) => c._id !== card._id);\n      setCards(newCards);\n    })\n    .catch(err => console.log(err))\n  }\n\n  React.useEffect(() => {\n    api.getCardList()\n    .then(res => {\n      setCards(res);\n    })\n    .catch(err => console.log(err))\n  }, [setCards, cards])\n\n  React.useEffect(() => {\n    api.getUserInfo()\n    .then(res => {\n      setCurrentUser(res);\n    })\n    .catch(err => console.log(err));\n    }, [setCurrentUser]\n  )\n\n  function handleUpdateAvatar(avatar) {\n    api.setUserAvatar(avatar)\n    .then(setCurrentUser({\n      avatar,\n      name: currentUser.name,\n      about: currentUser.about\n    }))\n    .then(closeAllPopups())\n    .catch(err => console.log(err));\n  }\n\n  function handleUpdateUser({name, about}) {\n    api.setUserInfo(name, about)\n    .then(setCurrentUser({\n      avatar: currentUser.avatar,\n      name,\n      about\n    }))\n    .then(closeAllPopups())\n    .catch(err => console.log(err));\n  }\n\n  function handleAddCardSubmit({name, link}){\n    api.addCard({name, link})\n    .then((newCard) => {\n      setCards([...cards, newCard])}\n    )\n    .then(closeAllPopups())\n    .catch(err => console.log(err));\n  }\n\n  function handleEditAvatarClick() {\n    setIsAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddCardClick() {\n    setIsAddCardPopupOpen(true);\n  }\n\n  function handleCardClick(link, caption){\n    setIsImagePopupOpen(true);\n    setImage(link);\n    setImageCaption(caption);\n  }\n\n  function handleDeleteCardClick() {\n    setIsDeleteCardPopupOpen(true);\n  }\n\n  function closeAllPopups() {\n    setIsInfoTooltipPopupOpen(false);\n    setIsAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddCardPopupOpen(false);\n    setIsDeleteCardPopupOpen(false);\n    setIsImagePopupOpen(false);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <BrowserRouter>\n          <Switch>\n            <Route path='/signup'>\n              <Header link='/signin' linkText='Log in' />\n              <Register handleSignup={handleSignup} />\n            </Route>\n            <Route path='/signin'>\n              <Header link='/signup' linkText='Sign up' />\n              <Login handleLogin={handleLogin} />\n            </Route>\n            <ProtectedRoute exact path='/' isLoggedIn={isLoggedIn} component={Main} />\n            <Header link='/signin' linkText='Sign Out' onClick={handleSignOut} />\n            <Main \n              onEditAvatar={handleEditAvatarClick}\n              onEditProfile={handleEditProfileClick}\n              onAddCard={handleAddCardClick}    \n            >\n              {cards.map((card) => {\n              return (\n                <Card\n                card={card}\n                key={card._id}\n                id={card._id}\n                image={card.link}\n                title={card.name}\n                likesCount={card.likes.length}\n                onCardLike={handleCardLike}\n                onDeleteCard={handleDeleteCardClick}\n                onCard={handleCardClick}\n                />\n              )\n            })}\n            </Main>\n            <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n            <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n            <AddCardPopup isOpen={isAddCardPopupOpen} onClose={closeAllPopups} onAddCardSubmit={handleAddCardSubmit} />\n            <PopupWithImage image={image} title={imageCaption} onClose={closeAllPopups} isOpen={isImagePopupOpen} />\n            <PopupWithForm name=\"delete-card\" action='Delete Card' title='Are you sure?' button='yes' onClose={closeAllPopups} isOpen={isDeleteCardPopupOpen} onSubmit={handleCardDelete} />\n            <Footer />\n          </Switch>\n        </BrowserRouter>\n      </div>\n    </CurrentUserContext.Provider>\n    \n  );\n}\n\nexport default App;\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}