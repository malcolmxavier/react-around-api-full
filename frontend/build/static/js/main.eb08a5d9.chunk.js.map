{"version":3,"sources":["images/logo.svg","components/Register.js","components/Login.js","components/PopupWithForm.js","components/InfoTooltip.js","components/Header.js","components/ProtectedRoute.js","contexts/CurrentUserContext.js","components/Card.js","components/Main.js","components/Footer.js","components/EditAvatarPopup.js","components/EditProfilePopup.js","components/AddCardPopup.js","components/PopupWithImage.js","utils/auth.js","utils/API.js","components/App.js","serviceWorker.js","index.js"],"names":["module","exports","Register","props","React","useState","email","setEmail","password","setPassword","handleSubmit","e","preventDefault","handleSignup","className","onSubmit","type","placeholder","required","onChange","target","value","minLength","aria-label","onClick","to","Login","handleLogin","PopupWithForm","isOpen","name","action","onClose","title","children","button","InfoTooltip","valid","Header","src","logo","alt","userEmail","link","linkText","ProtectedRoute","Component","component","isLoggedIn","onHandleSignOut","CurrentUserContext","createContext","Card","currentUser","useContext","isOwn","card","owner","_id","isLiked","likes","some","i","key","id","style","backgroundImage","image","onCard","onDeleteCard","onCardLike","likesCount","Main","Provider","avatar","onEditAvatar","onEditProfile","about","onAddCard","cards","map","length","Footer","EditAvatarPopup","avatarRef","useRef","closeAllPopups","onUpdateAvatar","current","ref","EditProfilePopup","setName","description","setDescription","useEffect","onUpdateUser","maxLength","AddCardPopup","newCardName","setNewCardName","newCardLink","setNewCardLink","onAddCardSubmit","PopupWithImage","BASE_URL","API","baseURL","headers","this","_baseURL","_headers","fetch","then","res","ok","json","Promise","reject","status","statusText","method","body","JSON","stringify","token","localStorage","getItem","api","App","setIsLoggedIn","isSuccessful","setIsSuccessful","isInfoTooltipPopupOpen","setIsInfoTooltipPopupOpen","userData","setUserData","setCurrentUser","setCard","setCards","isEditAvatarPopupOpen","setIsAvatarPopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddCardPopupOpen","setIsAddCardPopupOpen","isDeleteCardPopupOpen","setIsDeleteCardPopupOpen","isImagePopupOpen","setIsImagePopupOpen","setImage","imageCaption","setImageCaption","history","useHistory","jwt","data","auth","username","getCardList","getUserInfo","push","catch","err","console","log","path","Error","setItem","exact","removeItem","removeCardLike","newCard","newCards","c","addCardLike","caption","setUserAvatar","setUserInfo","addCard","removeCard","filter","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","document","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.eb08a5d9.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.8f7611ae.svg\";","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Register(props) {\n    const [email, setEmail] = React.useState('');\n    const [password, setPassword] = React.useState('');\n\n    function handleEmailChange(e) {\n        setEmail(e.target.value)\n    }\n    \n    function handlePasswordChange(e) {\n        setPassword(e.target.value)\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.handleSignup(email, password);\n    }\n\n    return (\n        <main className='content'>\n            <h2 className='form__name'>Sign up</h2>\n            <form className='form' onSubmit={handleSubmit}>\n                <input className='form__input' type='email' placeholder='Email' required onChange={handleEmailChange} />\n                <span className='form__error'></span>\n                <input className='form__input' type='text' placeholder='Password' required minLength='8' onChange={handlePasswordChange} />\n                <span className='form__error'></span>\n                <button className='form__button' type='submit' aria-label='Sign Up' onClick={handleSubmit}>Sign up</button>\n            </form>\n            <Link to='/signin' className='form__link'>Already a member? Log in here!</Link>\n        </main>\n    );\n}\n\nexport default Register;\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nfunction Login(props) {\n    const [email, setEmail] = React.useState('');\n    const [password, setPassword] = React.useState('');\n\n    function handleEmailChange(e) {\n        setEmail(e.target.value)\n    }\n    \n    function handlePasswordChange(e) {\n        setPassword(e.target.value)\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n        props.handleLogin(email, password);\n    }\n\n    return (\n        <main className='content'>\n            <h2 className='form__name'>Log in</h2>\n            <form className='form' onSubmit={handleSubmit}>\n                <input className='form__input' type='email' placeholder='Email' required onChange={handleEmailChange} />\n                <span className='form__error'></span>\n                <input className='form__input' type='text' placeholder='Password' required onChange={handlePasswordChange} />\n                <span className='form__error'></span>\n                <button className='form__button' type='submit' aria-label='Log In' onClick={handleSubmit}>Log in</button>\n            </form>\n            <Link to='/signup' className='form__link'>Not a member yet? Sign up here!</Link>\n        </main>\n    );\n}\n\nexport default Login;\n","import React from 'react';\n\nfunction PopupWithForm(props) {\n    return (\n        <div>\n            <section className={props.isOpen ? `popup popup_type_${props.name} popup_opened` : `popup popup_type_${props.name}`}>\n            <div className='popup__container popup__container_type_form'>\n              <button className='close-button' aria-label={`Close ${props.action} Popup`} onClick={props.onClose}></button>\n              <h2 className='popup__title'>{props.title}</h2>\n              <form className={`popup__form popup__form_type_${props.name}`} onSubmit={props.onSubmit}>\n                {props.children}\n                <button className={`popup__button ${props.button}-button`} type='submit' aria-label={`${props.action}`} onClick={props.onClose}></button>\n              </form>\n            </div>\n          </section>\n        </div>\n    );\n}\n\nexport default PopupWithForm;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction InfoTooltip(props) {\n\n    return(\n        <PopupWithForm name='login' action={`Login ${props.valid ? 'Success' : 'Failure'}`} button='info-tooltip' onClose={props.onClose} isOpen={props.isOpen}>\n          <div className={`popup__icon ${props.valid ? 'success-icon' : 'failure-icon'}`} ></div>\n          <p className='popup__text'>{props.valid ? 'Success! You have now been registered' : 'Oops, something went wrong! Please try again.'}</p>\n        </PopupWithForm>\n    );\n}\n\nexport default InfoTooltip;","import React from 'react';\nimport { Link } from 'react-router-dom';\nimport logo from '../images/logo.svg';\n\nfunction Header(props) {\n  return (\n    <div className=\"Header\">\n        <header className='header'>\n          <img src={logo} alt='Around The U.S. text logo' className='logo' />\n          <div className='header__content'>\n            <p className='header__username'>{props.userEmail}</p>\n            <Link to={props.link} className='header__link' onClick={props.onClick}>{props.linkText}</Link>\n          </div>\n        </header>\n    </div>\n    );\n}\n\nexport default Header;","import React from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport Header from './Header.js';\n\nfunction ProtectedRoute({component: Component, ...props}) {\n    return (\n        <Route>\n            {() => props.isLoggedIn ? \n            <>\n                <Header userEmail={props.userEmail} link='/signin' linkText='Sign Out' onClick={props.onHandleSignOut} />\n                <Component {...props} />\n            </>\n            : <Redirect to='/signin' />}\n        </Route>\n    )\n}\n\nexport default ProtectedRoute;","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();","import React from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nfunction Card(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n    const isOwn = props.card.owner._id === currentUser._id;\n    const isLiked = props.card.likes.some(i => i._id === currentUser._id);\n\n    function handleCardClick() {\n        props.onCard(props.image, props.title);\n    }\n\n    function handleLikeClick() {\n        props.onCardLike(props.card);\n    }\n\n    function handleTrashButtonClick() {\n        props.onDeleteCard(props.card)\n    }\n\n    return(\n        <li className='photo-grid__item' key={props.id}>\n            <div className='photo-grid__image' style={{backgroundImage:`url(${props.image})`}} onClick={handleCardClick}></div>\n            <button className={isOwn ? 'trash-button' : 'trash-button_hidden'} aria-label='Delete Card' onClick={handleTrashButtonClick}></button>\n            <div className='photo-grid__description'>\n                <h3 className='photo-grid__label'>{props.title}</h3>\n                <div className='photo-grid__likes'>\n                    <button className={isLiked ? 'like-button like-button_clicked' : 'like-button'} aria-label='Like Card' onClick={handleLikeClick}></button>\n                    <p className='photo-grid__likes-count'>{props.likesCount}</p>\n                </div>\n            </div>\n        </li>\n    );\n}\n\nexport default Card;","import React from 'react';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\nimport Card from './Card.js';\n\nfunction Main(props) {\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <main className='content'>\n        <section className='profile'>\n          <div className='profile__avatar'>\n            <img src={currentUser.avatar} alt='Profile avatar' className='avatar avatar_profile'/>\n            <div className='avatar__edit-overlay'>\n              <button className='edit-button edit-button_avatar' aria-label=\"Edit Avatar\" onClick={props.onEditAvatar}></button>\n            </div>\n          </div>\n          <div className='profile__info'>\n            <h1 className='profile__name'>{currentUser.name}</h1>\n            <button className='edit-button edit-button_profile' aria-label='Edit Profile' onClick={props.onEditProfile}></button>\n            <p className='profile__occupation'>{currentUser.about}</p>\n          </div>\n          <button className='add-button' aria-label='Add Card' onClick={props.onAddCard}></button>\n        </section>\n\n        <section className='photo-grid'>\n          <ul className='photo-grid__list'>\n          {props.cards.map((card) => {\n              return (\n                <Card\n                  card={card}\n                  key={card._id}\n                  id={card._id}\n                  image={card.link}\n                  title={card.name}\n                  likesCount={card.likes.length}\n                  onCardLike={props.onCardLike}\n                  onDeleteCard={props.onDeleteCard}\n                  onCard={props.onCard}\n                />\n              )\n            })}\n          </ul>\n        </section>\n      </main>\n    </CurrentUserContext.Provider>\n    );\n}\n\nexport default Main;","import React from 'react';\n\nfunction Footer() {\n  return (\n    <div className='Footer'>\n        <footer className='footer'>\n          <p>&copy; 2020 Around The U.S.</p>\n        </footer>\n    </div>\n    );\n}\n\nexport default Footer;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction EditAvatarPopup(props) {\n    const avatarRef = React.useRef('')\n\n    function handleSubmit(e){\n        e.preventDefault();\n        props.onUpdateAvatar(avatarRef.current.value);\n    }\n\n    return (\n        <PopupWithForm name='edit-avatar' action='Edit Avatar' title='Change profile picture' button='save' onClose={props.closeAllPopups} isOpen={props.isOpen} onSubmit={handleSubmit}>\n          <input name='avatar' id='avatar-url' className='popup__input popup__input_type_url' type='url' placeholder='Image URL' required ref={avatarRef} />\n          <span id='avatar-url-error' className='popup__error'></span>\n        </PopupWithForm>\n    )\n}\n\nexport default EditAvatarPopup;","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\n\nfunction EditProfilePopup(props) {\n    const currentUser = React.useContext(CurrentUserContext);\n    const [name, setName] = React.useState(currentUser.name);\n    const [description, setDescription] = React.useState(currentUser.about);\n\n    React.useEffect(() => {\n        setName(currentUser.name)\n        setDescription(currentUser.about)\n      }, [currentUser])\n\n      function handleNameChange(e) {\n        setName(e.target.value)\n      }\n    \n      function handleDescriptionChange(e) {\n        setDescription(e.target.value)\n      }\n\n      function handleSubmit(e) {\n        e.preventDefault();\n      \n        props.onUpdateUser({\n          name,\n          about: description,\n        });\n      }\n\n      return (\n        <PopupWithForm name='edit-profile' action='Edit Profile' title='Edit profile' button='save' onClose={props.onClose} isOpen={props.isOpen} onSubmit={handleSubmit}>\n          <input name='userName' value={name} id='profile-name' className='popup__input popup__input_type_name' type='text' placeholder='Name' required minLength='2' maxLength='40' onChange={handleNameChange} />\n          <span id='profile-name-error' className='popup__error'></span>\n          <input name='userOccupation' value={description} id='profile-occupation' className='popup__input popup__input_type_occupation' type='text' placeholder='About Me' required minLength='2' maxLength='200' onChange={handleDescriptionChange} />\n          <span id='profile-occupation-error' className='popup__error'></span>\n        </PopupWithForm>\n      )\n}\n\nexport default EditProfilePopup;\n\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm.js';\n\nfunction AddCardPopup(props) {;\n    const [newCardName, setNewCardName] = React.useState('')\n    const [newCardLink, setNewCardLink] = React.useState('');\n\n    function handleNewCardNameChange(e) {\n        setNewCardName(e.target.value);\n    }\n\n    function handleNewCardLinkChange(e) {\n        setNewCardLink(e.target.value);\n    }\n\n    function handleSubmit(e) {\n        e.preventDefault();\n\n        props.onAddCardSubmit({\n        name: newCardName,\n        link: newCardLink\n        })\n    }\n\n    return(\n        <PopupWithForm name='add-card' action='Add Card' title='New Place' button='create' onClose={props.onClose} isOpen={props.isOpen} onSubmit={handleSubmit}>\n          <input name='name' id='card-label' className='popup__input popup__input_type_label' type='text' placeholder='Label' required minLength=\"1\" maxLength=\"30\" onChange={handleNewCardNameChange} />\n          <span id='card-label-error' className='popup__error'></span>\n          <input name='link' id='card-url' className='popup__input popup__input_type_url' type='url' placeholder='Image URL' required onChange={handleNewCardLinkChange} />\n          <span id='card-url-error' className='popup__error'></span>\n        </PopupWithForm>\n    )\n}\n\nexport default AddCardPopup;","import React from 'react';\n\nfunction PopupWithImage(props) {\n    return (\n        <div>\n            <section className={props.isOpen ? 'popup popup_type_image popup_opened' : 'popup popup_type_image'}>\n                <div className='popup__container popup__container_type_image'>\n                <figure className='figure'>\n                    <button className='close-button' aria-label='Close Image Popup' onClick={props.onClose}></button>\n                    <img className='popup__image' alt={props.title} src={props.image}/>\n                    <figcaption className='popup__caption'>{props.title}</figcaption>\n                </figure>\n                </div>\n            </section>\n        </div>\n    );\n}\n\nexport default PopupWithImage;","export const BASE_URL = 'https://api.malcolmxavier.students.nomoreparties.site';\n\nexport const register = (email, password) => {\n    return fetch(`${BASE_URL}/signup`, {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({ email, password })\n    })\n    .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n}\n\nexport const authorize = (email, password) => {\n    return fetch(`${BASE_URL}/signin`, {\n        method: 'POST',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({ email, password })\n    })\n    .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    .then((data) => {\n        if (data.token) {\n            localStorage.setItem('jwt', data.token);\n            return data;\n        }\n    });\n}\n\n\nexport const getContent = (token) => {\n    return fetch(`${BASE_URL}/users/me`, {\n        method: 'GET',\n        headers: {\n            'Accept': 'application/json',\n            'Content-Type': 'application/json',\n            'Authorization': `Bearer ${token}`\n        }\n    })\n    .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    .then((data) => {\n        return data\n    })\n}","class API {\n    constructor({baseURL, headers}) {\n      this._baseURL = baseURL;\n      this._headers = headers;\n    }\n  \n    getUserInfo() {\n      return fetch(this._baseURL + '/users/me', {\n        headers: this._headers\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    };\n  \n    setUserInfo(name, about) {\n      return fetch(this._baseURL + '/users/me', {\n        headers: this._headers,\n        method: \"PATCH\",\n        body: JSON.stringify({\n          name,\n          about\n        })\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    };\n  \n    setUserAvatar(avatar) {\n      return fetch(this._baseURL + '/users/me/avatar', {\n        headers: this._headers,\n        method: \"PATCH\",\n        body: JSON.stringify({\n          avatar\n        })\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    };\n  \n    getCardList() {\n      return fetch(this._baseURL + '/cards', {\n        headers: this._headers\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    };\n  \n    addCard({name, link}) {\n      return fetch(this._baseURL + '/cards', {\n        headers: this._headers,\n        method: \"POST\",\n        body: JSON.stringify({\n          name: name,\n          link: link\n        })\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    };\n  \n    removeCard(_id) {\n      return fetch(this._baseURL + '/cards/' + _id, {\n        headers: this._headers,\n        method: \"DELETE\"\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    };\n  \n    addCardLike(_id) {\n      return fetch(this._baseURL + '/cards/likes/' + _id, {\n        headers: this._headers,\n        method: \"PUT\",\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    };\n  \n    removeCardLike(_id) {\n      return fetch(this._baseURL + '/cards/likes/' + _id, {\n        headers: this._headers,\n        method: \"DELETE\",\n      })\n      .then(res => res.ok ? res.json() : Promise.reject(res.status + ' Error: ' + res.statusText))\n    };\n  }\n  const token = localStorage.getItem('jwt');\n\n  const api = new API({\n    baseURL: \"https://api.malcolmxavier.students.nomoreparties.site\",\n    headers: {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json',\n      'Authorization': `Bearer ${token}`,\n    }\n  });\n  \n  export {api};","import React from 'react';\nimport { Route, Switch, useHistory } from 'react-router-dom';\nimport Register from './Register.js';\nimport Login from './Login.js';\nimport InfoTooltip from './InfoTooltip.js';\nimport ProtectedRoute from './ProtectedRoute.js';\nimport Header from './Header.js';\nimport Main from './Main.js';\nimport Footer from './Footer.js';\nimport PopupWithForm from './PopupWithForm.js';\nimport EditAvatarPopup from './EditAvatarPopup.js';\nimport EditProfilePopup from './EditProfilePopup.js';\nimport AddCardPopup from './AddCardPopup.js';\nimport PopupWithImage from './PopupWithImage.js';\nimport * as auth from '../utils/auth.js';\nimport {api} from '../utils/API.js';\nimport {CurrentUserContext} from '../contexts/CurrentUserContext.js';\nimport '../index.css';\n\nfunction App() {\n  const [isLoggedIn, setIsLoggedIn] = React.useState(false);\n  const [isSuccessful, setIsSuccessful] = React.useState(false);\n  const [isInfoTooltipPopupOpen, setIsInfoTooltipPopupOpen] = React.useState(false);\n  const [userData, setUserData] = React.useState({});\n  const [currentUser, setCurrentUser] = React.useState({avatar: '', name: '', about: ''});\n  const [card, setCard] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n  const [isEditAvatarPopupOpen, setIsAvatarPopupOpen] = React.useState(false);\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddCardPopupOpen, setIsAddCardPopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpen, setIsDeleteCardPopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n  const [image, setImage] = React.useState(\"\");\n  const [imageCaption, setImageCaption] = React.useState(\"\");\n  const history = useHistory();\n\n  React.useEffect(() => {\n    const jwt = localStorage.getItem('jwt');\n\n    if (jwt) {\n      auth.getContent(jwt)\n      .then((res) => {\n        const userData = {username: res.username, email: res.email}\n\n        setIsLoggedIn(true);\n        setUserData(userData);\n      })\n      .then(() => {\n        api.getCardList()\n        .then(res => {\n          setCards(res);\n        })\n      })\n      .then(() => {\n        api.getUserInfo()\n        .then(res => {\n          setCurrentUser(res);\n        })\n      })\n      .then(() => {\n        history.push('/');\n      })\n      .catch(err => console.log(err));\n    }\n  })\n\n  function handleSignup(email, password) {\n    auth.register(email, password)\n    .then((res) => {\n        if (!res || res.status === 400) {\n          setIsInfoTooltipPopupOpen(true);\n          throw new Error('Something is not right.');\n        } else {\n            setIsSuccessful(true);\n            setIsInfoTooltipPopupOpen(true);\n            history.push('/signin');\n        }\n        return res;\n    })\n    .catch(err => console.log(err));\n  }\n\n  function handleLogin(email, password) {\n    if (!email || !password) {\n      return;\n    }\n\n    auth.authorize(email, password)\n    .then((data) => { \n      if (!data) { \n          throw new Error('Something is not right.'); \n      }\n    }) \n    .then(() => {\n      api.getCardList()\n      .then(res => {\n        setCards(res);\n      })\n    })\n    .then(() => {\n      api.getUserInfo()\n      .then(res => {\n        setCurrentUser(res);\n      })\n    })\n    .then(() => {\n      setIsLoggedIn(true);\n      setUserData(userData);\n      history.push('/');\n    })\n    .catch(err => console.log(err));\n  }\n\n  function handleSignOut() {\n    localStorage.removeItem('jwt');\n    setIsLoggedIn(false);\n    history.push('/signin')\n  }\n  \n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    if (isLiked) {\n      api.removeCardLike(card._id)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch(err => console.log(err));\n    } else {\n      api.addCardLike(card._id)\n      .then((newCard) => {\n        const newCards = cards.map((c) => c._id === card._id ? newCard : c);\n        setCards(newCards);\n      })\n      .catch(err => console.log(err));\n    }\n  }\n\n  function handleCardDelete(e){\n    e.preventDefault();\n    api.removeCard(card._id)\n    .then(() => {\n      const newCards = cards.filter((c) => c._id !== card._id);\n      setCards(newCards);\n    })\n    .catch(err => console.log(err))\n  }\n\n  function closeAllPopups() {\n    setIsInfoTooltipPopupOpen(false);\n    setIsAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddCardPopupOpen(false);\n    setIsDeleteCardPopupOpen(false);\n    setIsImagePopupOpen(false);\n  }\n\n  function handleUpdateAvatar(avatar) {\n    api.setUserAvatar(avatar)\n    .then(() => {\n      setCurrentUser({\n      avatar,\n      name: currentUser.name,\n      about: currentUser.about\n      })\n    })\n    .then(() => {\n      closeAllPopups()\n    })\n    .catch(err => console.log(err));\n  }\n\n  function handleUpdateUser({name, about}) {\n    api.setUserInfo(name, about)\n    .then(() => {\n      setCurrentUser({\n      avatar: currentUser.avatar,\n      name,\n      about\n      })\n    })\n    .then(() => {\n      closeAllPopups()\n    })\n    .catch(err => console.log(err));\n  }\n\n  function handleAddCardSubmit({name, link}){\n    api.addCard({name, link})\n    .then((newCard) => {\n      setCards([...cards, newCard])}\n    )\n    .then(() => {\n      closeAllPopups()\n    })\n    .catch(err => console.log(err));\n  }\n\n  function handleEditAvatarClick() {\n    setIsAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddCardClick() {\n    setIsAddCardPopupOpen(true);\n  }\n\n  function handleCardClick(link, caption){\n    setIsImagePopupOpen(true);\n    setImage(link);\n    setImageCaption(caption);\n  }\n\n  function handleDeleteCardClick(card) {\n    setIsDeleteCardPopupOpen(true);\n    setCard(card);\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <div className=\"page\">\n        <Switch>\n          <Route path='/signup'>\n            <Header link='/signin' linkText='Log in' />\n            <Register handleSignup={handleSignup} />\n          </Route>\n          <Route path='/signin'>\n            <Header link='/signup' linkText='Sign up' />\n            <Login handleLogin={handleLogin} />\n          </Route>\n          <ProtectedRoute \n            exact path='/'\n            isLoggedIn={isLoggedIn}\n            userEmail={userData.email}\n            onHandleSignOut={handleSignOut}\n            component={Main}\n            cards={cards}\n            onEditAvatar={handleEditAvatarClick}\n            onEditProfile={handleEditProfileClick}\n            onAddCard={handleAddCardClick}\n            onCardLike={handleCardLike}\n            onDeleteCard={handleDeleteCardClick}\n            onCard={handleCardClick}\n          />\n        </Switch>\n        <InfoTooltip valid={isSuccessful} isOpen={isInfoTooltipPopupOpen} onClose={closeAllPopups} />\n        <EditAvatarPopup isOpen={isEditAvatarPopupOpen} onClose={closeAllPopups} onUpdateAvatar={handleUpdateAvatar}/>\n        <EditProfilePopup isOpen={isEditProfilePopupOpen} onClose={closeAllPopups} onUpdateUser={handleUpdateUser}/>\n        <AddCardPopup isOpen={isAddCardPopupOpen} onClose={closeAllPopups} onAddCardSubmit={handleAddCardSubmit} />\n        <PopupWithImage image={image} title={imageCaption} onClose={closeAllPopups} isOpen={isImagePopupOpen} />\n        <PopupWithForm name=\"delete-card\" action='Delete Card' title='Are you sure?' button='yes' onClose={closeAllPopups} isOpen={isDeleteCardPopupOpen} onSubmit={handleCardDelete} />\n        <Footer />\n      </div>\n    </CurrentUserContext.Provider>\n    \n  );\n}\n\nexport default App;\n\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter } from 'react-router-dom';\nimport './index.css';\nimport App from './components/App.js';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <BrowserRouter>\n      <App />\n    </BrowserRouter>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}